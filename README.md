# SimpleFaceRecog
本项目为简单的**跨平台**人脸识别工具，包含基础的人脸检测、识别、人脸信息储存等功能。
人脸识别算法基于**OpenCV**提供的级联分类器通用算法，图形界面基于**Qt**。
此为本人本科毕业设计，在PC和树莓派上运行良好，不过识别的准确率不敢恭维。现在的商业项目应该都使用深度学习而不是模式识别了吧。
***
## 界面
![界面截图](https://raw.githubusercontent.com/azure42/SimpleFaceRecog/master/snap.png)
 1. 图像预览控件：该控件继承自QLabel类。时时更新摄像头获取的图像，若发现人脸，则使用蓝色圆形标注。其中大圆为级联分类器识别到的面部区域，两个小圆为嵌套识别得到的眼睛区域。
 2. 预处理人脸图像预览控件：该控件继承自QLabel类。时时更新人脸检测环节中，通过裁剪、归一化等处理后得到的人脸图像。
 3. 人脸识别控件：该控件继承自QLabel类和QPushBottom类。包括显示人脸识别结果的标签控件和用于控制识别过程的按钮。
 4. 用户信息显示控件：该控件继承自QTabelWidget类。用于显示数据库中已储存的人脸特征模型，分别列出了其ID和名称。
 5. 录入控件：该控件继承自QLineEdit类、QPushBottom类。实现了用户信息添加和删除功能，进而实现了权限管理。
 6. 日志显示控件：该控件继承自QListView类，用于显示程序日志信息，便于调试。在使用过程中可隐藏。
## 模块划分
 1. 人脸检测模块：使用OpenCV提供的人脸模型检测摄像头获取到的图像中是否存在人脸图像，若存在，则对图像进行裁剪、归一化等预处理工作，得到固定尺寸的清晰人脸图像，为之后的模型训练和人脸识别做好准备。
 2. 人脸特征记录模块：当使用用户信息录入功能时，此模块被调用。首先在程序目录下新建一个文件夹，文件夹命名规则为id_name。其中“id”为一自增数字，即为该用户分配的编号；“name”为用户在图形界面中输入的名称。然后，配合人脸检测模块从摄像头中提取该用户面部图像，储存在对应文件夹中。
 3. 人脸模型训练模块：当用户信息录入完毕时，即可使用训练模块得到人脸特征模型，以备人脸识别功能使用。该模块被调用时，首先扫描人脸特征记录模块所创建的文件夹，解析图片，并通过文件夹名读取用户id。然后创建一个vector<int>和vector<Mat>两个容器，将人脸图片和其对应的id依次存入其中。最后调用OpenCV的模型训练API，得到人脸特征模型后储存到硬盘，以备人脸识别模块使用。
 4. 人脸识别模块：当人脸特征模型训练完成后，建立分类器，读取人脸特征模型，配合人脸检测模块将摄像头获取的人脸图像分类，得到的分类id即为此前存储的用户id，以此实现人脸识别功能。
 ## 编译
 需要注意的是，人脸识别相关模块并不直接包含在软件源提供的OpenCV库当中，需要手动下载OpenCV_Contrib并编译安装。相关依赖库配置详见qmake文件face2.pro。本人在OpenCV 3.1和Qt 5.7环境中开发。
 
